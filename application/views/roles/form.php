<?php $this->load->view("partial/header"); ?><?php echo form_open($controller_name . '/save/' . $id, array('id' => $controller_name . '_form', 'class' => 'form-horizontal')); ?><div class="title-block">    <h3 class="title">         <?php if ($id > 0): ?>            Edit User Type Permission        <?php else: ?>            New User Type Permission        <?php endif; ?>    </h3>    <p class="title-description">        User type permission basic information    </p></div><div class="section">    <div class="row sameheight-container">        <div class="col-lg-12">            <div class="card">                <div class="card-block">                    <div class="inqbox float-e-margins">                        <div class="inqbox-content">                            <div style="text-align: center">                                <div id="required_fields_message"><?php echo $this->lang->line('common_fields_required_message'); ?></div>                                <ul id="error_message_box"></ul>                            </div>                            <div class="form-group row">                                <label class="col-sm-2 control-label">                                    <?php echo form_label('Role Name' . ':', 'role_name', array('class' => 'required')); ?>                                </label>                                <div class="col-sm-10">                                    <input type="text" name="role_name" value="<?= $info->name; ?>" id="role_name" class="form-control">                                </div>                            </div>                            <div class="hr-line-dashed"></div>                            <div class="form-group row">                                <label class="col-sm-2 control-label">                                    <?php echo form_label('Lower level' . ':', 'low_level'); ?>                                </label>                                <div class="col-sm-10">                                    <ul>                                        <?php foreach ($roles as $role): ?>                                            <li style="list-style: none;">                                                <label style="width: 100%; line-height: 1">                                                                                    <input type="checkbox" name="low_level[]" value="<?= $role->role_id; ?>" <?= in_array($role->role_id, $low_levels) ? "checked='checked'" : ""; ?> />                                                    <span><?= $role->name; ?></span>                                                </label>                                            </li>                                        <?php endforeach; ?>                                    </ul>                                </div>                            </div>                            <div class="hr-line-dashed"></div>                            <div class="form-group row">                                <label class="col-sm-2 control-label">                                    Permissions                                </label>                                <div class="col-sm-10">                                    <fieldset id="access_rights">                                        <div style="color:red"><?php echo $this->lang->line("employees_permission_desc"); ?></div>                                        <ul id="permission_list">                                            <?php foreach ($all_modules->result() as $module) : ?>                                                <li style="list-style: none;">	                                                    <label style="width: 100%">                                                        <input type="checkbox" name="rights[]" value="<?= $module->module_id; ?>" <?= in_array($module->module_id, $module_ids) ? "checked='checked'" : ""; ?>>                                                        <span class="medium"><?php echo $this->lang->line('module_' . $module->module_id) != '' ? $this->lang->line('module_' . $module->module_id) : $module->label; ?>:</span>                                                        <span class="small"><?php echo $this->lang->line('module_' . $module->module_id . '_desc') != '' ? $this->lang->line('module_' . $module->module_id . '_desc') : $module->description; ?></span>                                                    </label>                                                </li>                                            <?php endforeach; ?>                                        </ul>                                    </fieldset>                                </div>                            </div>                        </div>                    </div>                </div>                <div class="col-lg-12">                    <div class="form-group">                        <a href="<?= site_url('roles') ?>" class="btn btn-default btn-secondary"><?= $this->lang->line("common_close"); ?></a>                        <?php                        echo form_submit(                                array(                                    'name' => 'submit',                                    'id' => 'submit',                                    'value' => $this->lang->line('common_submit'),                                    'class' => 'btn btn-primary'                                )                        );                        ?>                    </div>                </div>            </div>        </div>    </div>    </div><?php echo form_close();?><?php $this->load->view("partial/footer"); ?><script type='text/javascript'>    //validation and submit handling    $(document).ready(function ()    {        $("#div-form").height($(window).height() - 250);        $('#<?= $controller_name; ?>_form').validate({            submitHandler: function (form){                $(form).ajaxSubmit({                    success: function (response){                        if (!response.success)                        {                            set_feedback(response.message, 'error_message', true);                        }                         else                        {                            set_feedback(response.message, 'success_message', false);                        }                        $("#roles_form").attr("action", "<?= site_url(); ?>loan_types/save/" + response.role_id);                    },                    dataType: 'json'                });            },            errorLabelContainer: "#error_message_box",            wrapper: "li",            rules:                    {                        name: "required"                    },            messages:                    {                        name: "<?php echo $this->lang->line($controller_name . '_name_required'); ?>",                    }        });    });</script>